### Title
FirstRoundCommandStrategy Offset Calculation Causes Significant Discontinuity in Round 1 Mining Schedule

### Summary
The `FirstRoundCommandStrategy.GetAEDPoSConsensusCommand()` method uses an incorrect offset calculation formula `(Order + MinersCount - 1) * miningInterval` for miners with Order ≥ 2, causing Round 1 to take approximately 80% longer than subsequent rounds (9x vs 5x miningInterval for 5 miners). This creates a major discontinuity in mining schedules when transitioning from Round 1 to Round 2, as Round 2+ correctly uses `Order * miningInterval`.

### Finding Description

In `FirstRoundCommandStrategy.GetAEDPoSConsensusCommand()`, the offset calculation uses an inflated formula: [1](#0-0) 

For a 5-miner system with `UpdateValue` behavior:
- Order 1: offset = `miningInterval` (1x) ✓
- Order 2: offset = `(2 + 5 - 1) * miningInterval` = 6x ✗
- Order 3: offset = `(3 + 5 - 1) * miningInterval` = 7x ✗
- Order 4: offset = `(4 + 5 - 1) * miningInterval` = 8x ✗
- Order 5: offset = `(5 + 5 - 1) * miningInterval` = 9x ✗

This contrasts sharply with Round 2+ behavior, where `NormalBlockCommandStrategy` uses `ArrangeNormalBlockMiningTime`: [2](#0-1) 

Which returns `Max(ExpectedMiningTime, currentBlockTime)`, where `ExpectedMiningTime` is correctly set during round generation: [3](#0-2) 

This produces the expected pattern: Order 1 = 1x, Order 2 = 2x, Order 3 = 3x, etc.

Notably, Round 1's `ExpectedMiningTime` values are ALSO correctly initialized using the same pattern: [4](#0-3) 

However, `FirstRoundCommandStrategy` ignores these correct `ExpectedMiningTime` values and applies its own inflated formula, causing miners to wait much longer than necessary.

The strategy selection occurs in `GetConsensusCommand`: [5](#0-4) 

### Impact Explanation

**Operational Impact - Consensus Delay:**
- Round 1 duration: ~9x miningInterval (36 seconds for 4000ms interval)
- Normal round duration: ~5x miningInterval (20 seconds for 4000ms interval)
- **80% increase in Round 1 duration** compared to subsequent rounds

**Affected Operations:**
- Every blockchain initialization and term transition experiences delayed block production
- Time slots at 2x, 3x, 4x, 5x miningInterval are wasted in Round 1
- Inconsistent miner behavior between Round 1 and Round 2+ creates confusion
- Smart contract operations dependent on timely block production are delayed

**Severity Justification:**
While no funds are directly at risk, this represents a critical consensus integrity issue affecting blockchain startup performance and creating unpredictable timing behavior during the most critical phase of each term.

### Likelihood Explanation

**Reachability:** 100% - This code path is executed in EVERY Round 1 for EVERY miner with `UpdateValue` behavior.

**Preconditions:** None required - occurs automatically during normal consensus operation.

**Attack Complexity:** N/A - This is a systemic bug, not an exploit. The incorrect behavior manifests automatically without any attacker action.

**Execution Practicality:** Guaranteed - The test suite even validates this incorrect behavior: [6](#0-5) 

The test expects Order 2 to mine at 7x miningInterval, confirming the inflated formula is consistently applied.

**Probability:** 100% occurrence rate for every Round 1 of every term across all AElf chains using AEDPoS consensus.

### Recommendation

**Code-Level Fix:**

Replace the inflated offset calculation in `FirstRoundCommandStrategy.GetAEDPoSConsensusCommand()` with the correct formula:

```csharp
var offset = Order.Mul(miningInterval);
```

Remove the special case for Order 1, as it's unnecessary - the formula `Order * miningInterval` works correctly for all orders.

**Invariant Check:**

Add validation to ensure Round 1 mining schedule consistency:
- Verify that `ArrangedMiningTime` intervals match the `ExpectedMiningTime` pattern
- Assert that Round 1 duration doesn't exceed expected bounds (MinersCount * miningInterval + tolerance)

**Test Case Updates:**

Update test expectations in `ACS4ImplTest.cs` to validate the CORRECT behavior:
- Order 2 should mine at `currentBlockTime + 2 * miningInterval`, not `currentBlockTime + 6 * miningInterval`
- Add regression tests comparing Round 1 and Round 2 mining patterns for consistency

### Proof of Concept

**Initial State:**
- 5 initial miners configured
- Round 1 initialized with miningInterval = 4000ms
- BootMiner (Order 1) has mined first block at time T0 + 4000ms

**Transaction Sequence:**

1. Miner with Order 2 calls `GetConsensusCommand` with:
   - `currentRound.RoundNumber = 1`
   - `behaviour = AElfConsensusBehaviour.UpdateValue`
   - `currentBlockTime = T0 + 4000ms`

**Expected Result (Correct):**
- `ArrangedMiningTime = T0 + 8000ms` (currentBlockTime + 2 * 4000ms)
- Miner produces block 2 seconds after Miner 1

**Actual Result (Buggy):**
- `ArrangedMiningTime = T0 + 28000ms` (T0 + 4000ms + 6 * 4000ms)
- Miner waits 24 seconds after Miner 1, creating a 22-second delay

**Success Condition:**
The discrepancy between expected (8 seconds) and actual (28 seconds) mining time demonstrates the discontinuity. When Round 2 begins, miners revert to the correct 4-second intervals, proving the inconsistency.

### Citations

**File:** contract/AElf.Contracts.Consensus.AEDPoS/ConsensusCommandGeneration/Strategies/FirstRoundCommandStrategy.cs (L34-37)
```csharp
            var offset =
                _consensusBehaviour == AElfConsensusBehaviour.UpdateValue && Order == 1
                    ? miningInterval
                    : Order.Add(MinersCount).Sub(1).Mul(miningInterval);
```

**File:** contract/AElf.Contracts.Consensus.AEDPoS/ConsensusCommandGeneration/Strategies/NormalBlockCommandStrategy.cs (L25-26)
```csharp
            var arrangedMiningTime =
                MiningTimeArrangingService.ArrangeNormalBlockMiningTime(CurrentRound, Pubkey, CurrentBlockTime);
```

**File:** contract/AElf.Contracts.Consensus.AEDPoS/Types/Round_Generation.cs (L33-33)
```csharp
                ExpectedMiningTime = currentBlockTimestamp.AddMilliseconds(miningInterval.Mul(order)),
```

**File:** contract/AElf.Contracts.Consensus.AEDPoS/Types/MinerList.cs (L32-33)
```csharp
            minerInRound.ExpectedMiningTime =
                currentBlockTime.AddMilliseconds(i.Mul(miningInterval).Add(miningInterval));
```

**File:** contract/AElf.Contracts.Consensus.AEDPoS/AEDPoSContract_GetConsensusCommand.cs (L28-30)
```csharp
        if (currentRound.RoundNumber == 1 && behaviour == AElfConsensusBehaviour.UpdateValue)
            return new ConsensusCommandProvider(new FirstRoundCommandStrategy(currentRound, pubkey,
                currentBlockTime, behaviour)).GetConsensusCommand();
```

**File:** test/AElf.Contracts.Consensus.AEDPoS.Tests/BVT/ACS4ImplTest.cs (L135-138)
```csharp
        consensusCommand.ArrangedMiningTime.ShouldBe(blockchainStartTimestamp + new Duration
        {
            Seconds = AEDPoSContractTestConstants.MiningInterval.Mul(7).Div(1000)
        });
```
