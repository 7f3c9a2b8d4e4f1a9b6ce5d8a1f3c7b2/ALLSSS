### Title
Impossible-to-Release Proposals Due to Insufficient Threshold Validation

### Summary
The `Validate(Organization)` function fails to check that the sum of `MinimalApprovalThreshold`, `MaximalRejectionThreshold`, and `MaximalAbstentionThreshold` is at least equal to `MinimalVoteThreshold`. This allows creation of organizations where proposals can never be released because the minimum required votes cannot be achieved without triggering rejection or abstention thresholds.

### Finding Description

The validation logic in `Validate(Organization)` [1](#0-0)  performs several threshold checks at lines 77-80, but is missing a critical constraint.

The current validation ensures:
- `MaximalAbstentionThreshold + MinimalApprovalThreshold <= organizationMemberCount`
- `MaximalRejectionThreshold + MinimalApprovalThreshold <= organizationMemberCount`

However, it does NOT verify that:
`MinimalApprovalThreshold + MaximalRejectionThreshold + MaximalAbstentionThreshold >= MinimalVoteThreshold`

The release logic requires [2](#0-1) :
1. Rejections NOT > `MaximalRejectionThreshold` [3](#0-2) 
2. Abstentions NOT > `MaximalAbstentionThreshold` [4](#0-3) 
3. Approvals >= `MinimalApprovalThreshold` AND total votes >= `MinimalVoteThreshold` [5](#0-4) 

**Example causing impossibility:**
- `organizationMemberCount = 10`
- `MinimalApprovalThreshold = 5`
- `MaximalRejectionThreshold = 2` (allows 0-2 rejections)
- `MaximalAbstentionThreshold = 2` (allows 0-2 abstentions)
- `MinimalVoteThreshold = 10`

This passes all current validation checks (5+2=7≤10 for both constraints).

But for release, the maximum achievable votes without triggering rejection/abstention limits is:
- 5+ approvals + ≤2 rejections + ≤2 abstentions = maximum 9 votes (with 5 approvals, 2 rejections, 2 abstentions)

To reach 10 votes, any additional vote must either:
- Be a 3rd rejection → triggers rejection (3 > 2)
- Be a 3rd abstention → triggers abstention (3 > 2)
- Be more approvals → still only reaches 9 total with max allowed rejections/abstentions

The proposal is permanently deadlocked.

### Impact Explanation

**Governance DoS**: Organizations with this misconfiguration create proposals that can never be released, permanently freezing any governance actions they were meant to execute. This affects:

- **Critical contract upgrades** that require Association approval
- **Treasury/fund releases** managed through Association governance  
- **Permission changes** requiring multi-sig approval
- **Cross-chain operations** needing Association consent

The impact severity depends on what the affected organization controls. If such an organization is the sole authority for critical system functions (e.g., contract upgrades, emergency pauses), those functions become permanently inaccessible.

**Quantified damage**: Complete operational DoS for the affected organization's governance scope, potentially locking high-value assets or critical system configurations indefinitely until the organization is replaced (if possible).

### Likelihood Explanation

**Likelihood: High**

- **Reachable entry point**: Any user can create an Association organization via the public `CreateOrganization` method
- **Feasible preconditions**: No special privileges needed beyond understanding the threshold parameters
- **Complexity**: Low - simply requires setting threshold values that pass existing validation but violate the missing invariant
- **Detection**: The misconfiguration is not immediately obvious, as validation succeeds. The problem only manifests when attempting to release proposals, by which time the organization may already be in use.
- **Accidental occurrence**: Developers configuring multi-sig governance could easily create this scenario unintentionally when trying to set "strict" requirements (high vote threshold with tight rejection/abstention limits)

The vulnerability is highly practical because:
1. The validation appears comprehensive but has a logical gap
2. Organizations are typically configured once and reused many times
3. The issue may not be discovered until critical proposals are blocked
4. No mechanism exists to update organization thresholds after creation

### Recommendation

Add the missing invariant check to the `Validate(Organization)` function:

```csharp
// Add after line 76, before line 77:
proposalReleaseThreshold.MinimalApprovalThreshold + 
proposalReleaseThreshold.MaximalRejectionThreshold + 
proposalReleaseThreshold.MaximalAbstentionThreshold >= 
proposalReleaseThreshold.MinimalVoteThreshold &&
```

This ensures that the minimum votes required can actually be reached without triggering rejection or abstention thresholds.

**Additional safeguards:**
1. Add unit tests covering edge cases where `MinimalApprovalThreshold + MaximalRejectionThreshold + MaximalAbstentionThreshold < MinimalVoteThreshold` to verify rejection
2. Consider adding a validation helper function that explicitly documents all threshold invariants
3. Add organization configuration validation to documentation with examples of valid and invalid configurations

### Proof of Concept

**Setup:**
1. Call `CreateOrganization` with:
   - `OrganizationMemberList`: [Address1, Address2, ..., Address10] (10 members)
   - `ProposalReleaseThreshold.MinimalApprovalThreshold`: 5
   - `ProposalReleaseThreshold.MaximalRejectionThreshold`: 2
   - `ProposalReleaseThreshold.MaximalAbstentionThreshold`: 2
   - `ProposalReleaseThreshold.MinimalVoteThreshold`: 10
   - `ProposerWhiteList`: [Address1]

**Validation passes** (5+2=7≤10 for both checks).

**Exploitation:**
2. Create a proposal via `CreateProposal` from Address1
3. Attempt to gather votes:
   - 5 members approve
   - 2 members abstain  
   - 2 members reject
   - Total: 9 votes (< 10 required)

4. Try to add 10th vote:
   - If 3rd abstention: `IsProposalAbstained` returns true (3 > 2)
   - If 3rd rejection: `IsProposalRejected` returns true (3 > 2)
   - If 6th approval: Still only 10 votes total (6+2+2), but now 1 member hasn't voted, so if that member votes anything, we still have the same problem at 11 total needed

5. Call `Release` on the proposal → **fails** because `IsReleaseThresholdReached` always returns false

**Expected:** Organization should reject invalid threshold configuration
**Actual:** Organization is created with impossible-to-satisfy requirements, causing permanent governance DoS

### Citations

**File:** contract/AElf.Contracts.Association/Association_Helper.cs (L24-32)
```csharp
    private bool IsReleaseThresholdReached(ProposalInfo proposal, Organization organization)
    {
        var isRejected = IsProposalRejected(proposal, organization);
        if (isRejected)
            return false;

        var isAbstained = IsProposalAbstained(proposal, organization);
        return !isAbstained && CheckEnoughVoteAndApprovals(proposal, organization);
    }
```

**File:** contract/AElf.Contracts.Association/Association_Helper.cs (L34-39)
```csharp
    private bool IsProposalRejected(ProposalInfo proposal, Organization organization)
    {
        var rejectionMemberCount =
            proposal.Rejections.Count(organization.OrganizationMemberList.Contains);
        return rejectionMemberCount > organization.ProposalReleaseThreshold.MaximalRejectionThreshold;
    }
```

**File:** contract/AElf.Contracts.Association/Association_Helper.cs (L41-45)
```csharp
    private bool IsProposalAbstained(ProposalInfo proposal, Organization organization)
    {
        var abstentionMemberCount = proposal.Abstentions.Count(organization.OrganizationMemberList.Contains);
        return abstentionMemberCount > organization.ProposalReleaseThreshold.MaximalAbstentionThreshold;
    }
```

**File:** contract/AElf.Contracts.Association/Association_Helper.cs (L47-59)
```csharp
    private bool CheckEnoughVoteAndApprovals(ProposalInfo proposal, Organization organization)
    {
        var approvedMemberCount = proposal.Approvals.Count(organization.OrganizationMemberList.Contains);
        var isApprovalEnough =
            approvedMemberCount >= organization.ProposalReleaseThreshold.MinimalApprovalThreshold;
        if (!isApprovalEnough)
            return false;

        var isVoteThresholdReached =
            proposal.Abstentions.Concat(proposal.Approvals).Concat(proposal.Rejections).Count() >=
            organization.ProposalReleaseThreshold.MinimalVoteThreshold;
        return isVoteThresholdReached;
    }
```

**File:** contract/AElf.Contracts.Association/Association_Helper.cs (L61-81)
```csharp
    private bool Validate(Organization organization)
    {
        if (organization.ProposerWhiteList.Empty() ||
            organization.ProposerWhiteList.AnyDuplicate() ||
            organization.OrganizationMemberList.Empty() ||
            organization.OrganizationMemberList.AnyDuplicate())
            return false;
        if (organization.OrganizationAddress == null || organization.OrganizationHash == null)
            return false;
        var proposalReleaseThreshold = organization.ProposalReleaseThreshold;
        var organizationMemberCount = organization.OrganizationMemberList.Count();
        return proposalReleaseThreshold.MinimalVoteThreshold <= organizationMemberCount &&
               proposalReleaseThreshold.MinimalApprovalThreshold <= proposalReleaseThreshold.MinimalVoteThreshold &&
               proposalReleaseThreshold.MinimalApprovalThreshold > 0 &&
               proposalReleaseThreshold.MaximalAbstentionThreshold >= 0 &&
               proposalReleaseThreshold.MaximalRejectionThreshold >= 0 &&
               proposalReleaseThreshold.MaximalAbstentionThreshold +
               proposalReleaseThreshold.MinimalApprovalThreshold <= organizationMemberCount &&
               proposalReleaseThreshold.MaximalRejectionThreshold +
               proposalReleaseThreshold.MinimalApprovalThreshold <= organizationMemberCount;
    }
```
